<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Waste Management</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
</head>
<body>

<!-- ‚úÖ Navigation Bar -->
<header class="navbar">
  <div class="nav-container">
    <div class="logo">WasteManager</div>
    <nav>
      <a href="dashboard.html">Dashboard</a>
      <a href="waste-records.html">Waste Records</a>
      <a href="history.html">History</a>
      <a href="donations.html">Donations</a>
    </nav>
    <button id="logoutBtn" class="btn-logout">Logout</button>
  </div>
</header>

<!-- ‚úÖ Main Content -->
<main class="container">

  <!-- üëã Welcome Section -->
  <section class="welcome-section">
    <h1>Welcome, <span id="userName">User</span>!</h1>
    <p>Manage your waste efficiently and make a positive impact on the environment.</p>
  </section>

  <!-- üöÄ Quick Action Grid -->
  <section class="actions-grid">
    <div class="action-card" onclick="location.href='waste-records.html'">
      <i class="fas fa-plus-circle"></i>
      <h3>Add Waste</h3>
      <p>Log new waste entries with details.</p>
    </div>

    <div class="action-card" onclick="location.href='history.html'">
      <i class="fas fa-history"></i>
      <h3>View History</h3>
      <p>Check your waste and donation history.</p>
    </div>

    <div class="action-card" onclick="location.href='collection.html'">
      <i class="fas fa-truck"></i>
      <h3>Request Collection</h3>
      <p>Schedule waste collection services.</p>
    </div>

    <div class="action-card" onclick="location.href='reports.html'">
      <i class="fas fa-chart-line"></i>
      <h3>View Reports</h3>
      <p>Analyze waste and donation statistics.</p>
    </div>
  </section>

  <!-- üóÉÔ∏è Recent Activities -->
  <!-- üóÉÔ∏è Recent Activities -->
async function loadDashboardData(token) {
  // ‚úÖ Corrected: Use the new table body ID
  const activitiesTableBody = document.getElementById("activitiesTableBody");
  
  if (!activitiesTableBody) {
    console.error("Error: Couldn't find the activities table");
    return;
  }

  try {
    const response = await fetch("http://localhost:5000/api/dashboard", {
      method: "GET",
      headers: { Authorization: `Bearer ${token}` }
    });

    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

    const data = await response.json();
    
    // ‚úÖ Clear existing rows
    activitiesTableBody.innerHTML = "";

    // ‚úÖ Add sample data (replace with your actual data handling)
    activitiesTableBody.innerHTML = `
      <tr>
        <td>üóëÔ∏è Waste</td>
        <td>Plastic Bottles</td>
        <td>Plastic</td>
        <td>5 kg</td>
        <td>${new Date().toLocaleDateString()}</td>
      </tr>
      <tr>
        <td>‚ôªÔ∏è Donation</td>
        <td>Food Supplies</td>
        <td>Completed</td>
        <td>10 items</td>
        <td>${new Date().toLocaleDateString()}</td>
      </tr>
    `;

  } catch (error) {
    console.error("Error:", error);
    activitiesTableBody.innerHTML = `
      <tr><td colspan="5">Failed to load activities</td></tr>
    `;
  }
}
  
</main>

<!-- ‚úÖ Footer -->
<footer class="footer">
  <p>&copy; 2025 WasteManager | All rights reserved</p>
</footer>

</body>
</html>
